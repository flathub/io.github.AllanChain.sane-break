id: io.github.AllanChain.sane-break
runtime: org.kde.Platform
runtime-version: '6.9'
sdk: org.kde.Sdk
command: sane-break
finish-args:
  # X11 + XShm access
  - --share=ipc
  - --socket=fallback-x11
  # Wayland access
  - --socket=wayland
  # GPU acceleration if needed
  - --device=dri
  # Tray icon
  - --talk-name=org.kde.StatusNotifierWatcher
  # Audio output
  - --socket=pulseaudio
  # Battery status monitor
  - --system-talk-name=org.freedesktop.UPower
  # Idle status on GNOME
  - --talk-name=org.gnome.Mutter.IdleMonitor
modules:
  - name: layer-shell-qt
    buildsystem: cmake-ninja
    config-opts:
      - -DBUILD_TESTING=OFF
    sources:
      - type: archive
        url: https://download.kde.org/stable/plasma/6.4.3/layer-shell-qt-6.4.3.tar.xz
        sha256: 33e64ec0cd2d9e9547c3c3faa9c4d6a2006bf681fac361511f441b51f9dddb7c
        x-checker-data:
          type: anitya
          project-id: 8761
          stable-only: true
          url-template: https://download.kde.org/stable/plasma/$version/layer-shell-qt-$version.tar.xz
  - name: sane-break
    buildsystem: cmake-ninja
    config-opts:
      - -DCMAKE_BUILD_TYPE=RelWithDebInfo
      - -DLINUX_DIST=Flatpak
    sources:
      - type: git
        url: https://github.com/AllanChain/sane-break.git
        commit: 25b230b1d28a135cc188aa0dd1400de6da156646
        x-checker-data:
          type: git
          tag-pattern: ^v([\d.]+)$
          is-main-source: true
        tag: v0.8.4
